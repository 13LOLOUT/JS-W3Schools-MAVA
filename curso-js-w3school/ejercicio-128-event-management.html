<!DOCTYPE html>
<html>
<body>

<h2>Event Management - add/removeEventListener</h2>

<button id="add">‚ûï Agregar Evento</button>
<button id="remove">‚ûñ Remover Evento</button>
<hr>
<button id="test">üîò Test Click</button>

<p id="demo">Click "Agregar" ‚Üí "Test Click" ‚Üí "Remover"</p>

<pre id="code" style="background:#f8f9fa; padding:15px; border-radius:5px; font-size:14px;">
test.addEventListener("click", myFunction);
test.removeEventListener("click", myFunction);
</pre>

<script>
const testBtn = document.getElementById("test");
const addBtn = document.getElementById("add");
const removeBtn = document.getElementById("remove");
const demo = document.getElementById("demo");

function myFunction() {
  demo.innerHTML += "<br>‚úÖ Evento funcionando!";
}

// 1. AGREGAR evento
addBtn.addEventListener("click", function() {
  testBtn.addEventListener("click", myFunction);
  demo.innerHTML = "Evento AGREGADO ‚úÖ";
});

// 2. REMOVER evento (misma funci√≥n)
removeBtn.addEventListener("click", function() {
  testBtn.removeEventListener("click", myFunction);
  demo.innerHTML = "Evento REMOVIDO ‚ùå";
});

// 3. Bloquear evento (preventDefault)
document.getElementById("test").addEventListener("contextmenu", function(event) {
  event.preventDefault();
  demo.innerHTML += "<br>üîí Click derecho bloqueado";
});

document.getElementById("code").innerHTML = 
`// AGREGAR evento
element.addEventListener("click", miFuncion);

// REMOVER evento (misma funci√≥n)
element.removeEventListener("click", miFuncion);

// ‚ùå NO funciona:
test.onclick = miFuncion;           // Asigna
test.onclick = null;                // Remueve

// ‚úÖ Bloquear eventos
function handle(event) {
  event.preventDefault();           // Bloquea link/form
  event.stopPropagation();          // No propaga a padres
}

// M√∫ltiples listeners
btn.addEventListener("click", func1);
btn.addEventListener("click", func2);  // Todos ejecutan
`;
</script>

<div style="background:#d1ecf1; padding:15px; margin:20px 0; border-left:4px solid #17a2b8;">
<h3>‚ö†Ô∏è Reglas importantes:</h3>
<ul>
  <li><strong>removeEventListener</strong> necesita <em>misma funci√≥n nombrada</em></li>
  <li>Funciones an√≥nimas <code>() => {}</code> NO se pueden remover</li>
  <li><code>event.preventDefault()</code> bloquea acci√≥n por defecto</li>
  <li><code>event.stopPropagation()</code> evita propagaci√≥n</li>
</ul>
</div>

</body>
</html>